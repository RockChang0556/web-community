import{d as e,c as a,_ as t,r as s,o as r,a as o,b as l,w as n,e as c,u,h as d,i,f as p,j as f,t as g,k as m}from"./index.61af0d69.js";const v=e({name:"com-avatar",components:{},props:{src:{type:String,default:""},size:{type:Number,default:36}},setup:e=>({avatarUrl:a((()=>`http://106.52.242.121:4300${e.src}`)),avatarDefaultUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"})}),h={class:"com-avatar"},_=["src"];const b=e({name:"global-header",components:{Avatar:t(v,[["render",function(e,a,t,u,d,i){const p=s("el-avatar");return r(),o("div",h,[l(p,{size:e.size,src:e.avatarUrl},{default:n((()=>[c("img",{src:e.avatarDefaultUrl},null,8,_)])),_:1},8,["size","src"])])}]])},props:{user:{type:Object,default:()=>({})}},setup(){const e=u();return{logout:()=>{e.dispatch("user/logout"),d.push("/")}}}}),w={key:0,class:"global-header"},k=c("img",{src:"/web-community/logo.png",alt:"logo"},null,-1),y={key:0},z={class:"el-dropdown-link"},U=c("i",{class:"el-icon-arrow-down el-icon--right"},null,-1);var j=t(b,[["render",function(e,a,t,u,d,v){const h=s("router-link"),_=s("el-button"),b=s("avatar"),j=s("el-dropdown-item"),x=s("el-dropdown-menu"),C=s("el-dropdown");return e.user.isFetched?(r(),o("div",w,[l(h,{class:"header-logo",to:"/"},{default:n((()=>[k])),_:1}),e.user.id?(r(),p(C,{key:1,trigger:"click"},{dropdown:n((()=>[l(x,{class:"header-user-dropdown"},{default:n((()=>[l(h,{to:"/user/settings"},{default:n((()=>[l(j,{icon:"el-icon-setting"},{default:n((()=>[i(" 设置 ")])),_:1})])),_:1}),l(h,{to:"/admin/dashboard"},{default:n((()=>[l(j,{icon:"el-icon-setting"},{default:n((()=>[i(" 管理员空间 ")])),_:1})])),_:1}),l(j,{icon:"el-icon-switch-button",onClick:f(e.logout,["prevent"])},{default:n((()=>[i(" 退出登录 ")])),_:1},8,["onClick"])])),_:1})])),default:n((()=>[c("span",z,[l(b,{size:36,src:e.user.avatar_url},null,8,["src"]),i(" "+g(e.user.name)+" ",1),U])])),_:1})):(r(),o("div",y,[l(h,{to:"/login"},{default:n((()=>[l(_,{type:"danger",plain:""},{default:n((()=>[i("登录")])),_:1})])),_:1})]))])):m("",!0)}]]);export{j as G};
